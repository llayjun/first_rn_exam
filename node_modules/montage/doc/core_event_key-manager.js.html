<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: core/event/key-manager.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: core/event/key-manager.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module montage/core/event/key-manager
 * @requires montage/core/core
 */

var Montage = require("../core").Montage,
    defaultEventManager = require("./event-manager").defaultEventManager,
    MutableEvent = require("./mutable-event").MutableEvent;

var KEYNAMES_TO_KEYCODES = {
    // W3C Key Code
    backspace:              8,
    tab:                    9,
    enter:                  13,
    shift:                  16,
    control:                17,
    alt:                    18,
    capslock:               20,
    escape:                 27,
    space:                  32,
    pageup:                 33,
    pagedown:               34,
    end:                    35,
    home:                   36,
    left:                   37,
    up:                     38,
    right:                  39,
    down:                   40,
    delete:                 46,

    //https://www.w3.org/TR/uievents-key/
    arrowup:                38,
    arrowright:             39,
    arrowdown:              40,
    arrowdelete:            46,

    // W3C Optional Key Code (mostly for US keyboard layout)
    semicolon:              186,
    colon:                  186,
    equal:                  187,
    plus:                   187,
    comma:                  188,
    less:                   188,
    minus:                  189,
    underscore:             189,
    period:                 190,
    greater:                190,
    slash:                  191,
    questionmark:           191,
    backtick:               192,
    tilde:                  192,
    openingsquarebracket:   219,
    openingcurlybracket:    219,
    backslash:              220,
    pipe:                   220,
    closingsquarebracket:   221,
    closingcurlybracket:    221,
    singlequote:            222,
    doublequote:            222,


    // Non standard Virtal key code but commonly used
    clear:                  12,
    meta:                   91,
    contextmenu:            93,
    numpad0:                96,
    numpad1:                97,
    numpad2:                98,
    numpad3:                99,
    numpad4:                100,
    numpad5:                101,
    numpad6:                102,
    numpad7:                103,
    numpad8:                104,
    numpad9:                105,
    multiply:               106,
    add:                    107,
    subtract:               109,
    decimal:                110,
    divide:                 111,
    f1:                     112,
    f2:                     113,
    f3:                     114,
    f4:                     115,
    f5:                     116,
    f6:                     117,
    f7:                     118,
    f8:                     119,
    f9:                     120,
    f10:                    121,
    f11:                    122,
    f12:                    123,
    f13:                    124,
    f14:                    125,
    f15:                    126,
    f16:                    127,
    f17:                    128,
    f18:                    129,
    f19:                    130,
    f20:                    131,
    f21:                    132,
    f22:                    133,
    f23:                    134,
    f24:                    135
},

KEYCODES_TO_KEYNAMES = null,    // Will be build from the KEYNAMES_TO_KEYCODES dictionary

OPERAMAC_KEYNAMES_TO_KEYCODES = {
    meta:                   17,
    control:                57392,
    f17:                    63252,
    f18:                    63253,
    f19:                    63254,
    f20:                    63255,
    f21:                    63256,
    f22:                    63257,
    f23:                    63258,
    f24:                    63259
},

FIREFOX_KEYNAMES_TO_KEYCODES = {
    f13:                    44,
    f14:                    145,
    f15:                    19,
    f16:                    63251,
    f17:                    63252,
    f18:                    63253,
    f19:                    63254,
    f20:                    63255,
    f21:                    63256,
    f22:                    63257,
    f23:                    63258,
    f24:                    63259,
    meta:                   224
},

KEYNAMES_ALIASES = {
    cmd:        "command",
    ctl:        "control",
    ctrl:       "control",
    win:        "meta",
    windows:    "meta",
    opt:        "alt",
    option:     "alt"
},

MODIFIERS = {
    meta:       {name:"meta",    value:1},
    alt:        {name:"alt",     value:2},
    control:    {name:"control", value:4},
    shift:      {name:"shift",   value:8}
},

NORMALIZED_KEYS = {
    semicolon:              ";",
    colon:                  ":",
    equal:                  "=",
    plus:                   "+",
    comma:                  ",",
    less:                   "&lt;",
    minus:                  "-",
    underscore:             "_",
    period:                 ".",
    greater:                ">",
    slash:                  "/",
    questionmark:           "?",
    backtick:               "`",
    tilde:                  "~",
    openingsquarebracket:   "[",
    openingcurlybracket:    "{",
    backslash:              "\\",
    pipe:                   "|",
    closingsquarebracket:   "]",
    closingcurlybracket:    "}",
    singlequote:            "'",
    doublequote:            "\"",
    multiply:               "*",
    add:                    "+",
    subtract:               "-",
    decimal:                ".",
    divide:                 "/"
},

NORMALIZED_CHARS = null;    // Will be generated from the NORMALIZED_KEYS


/* Event type dispatched by KeyComposer */
var KEYPRESS_EVENT_TYPE = "keyPress",
    LONGKEYPRESS_EVENT_TYPE = "longKeyPress",
    KEYRELEASE_EVENT_TYPE = "keyRelease";

var defaultKeyManager = null;

/**
 * The KeyManager dispatches KeyComposer events when it detects a keyComposer
 * has been pressed or released.  Do not create a KeyManager directly but
 * instead require for the defaultKeyManager:
 *
 * ```js
 * require("./key-manager").defaultKeyManager
 * ```
 *
 * @class KeyManager
 * @classdesc Dispatches events to a key composer. There can only be one.
 * @extends Montage
*/
var KeyManager = exports.KeyManager = Montage.specialize(/** @lends KeyManager# */ {

    /**
      @private
    */
    _keyEventsListenerInstalled: {
        value: false
    },

    /**
      @private
    */
    _composerKeyMap: {
        value: {}
    },

    /**
      @private
    */
    _triggeredKeys: {
        value: {}
    },

    /**
      @private
    */
    _longPressKeys: {
        value: {}
    },

    /**
      @private
    */
    _cleanupTimeout: {
        value: null
    },

    /**
      @private
    */
    _cleanupThreshold: {
        value: 2000
    },

    /**
      @private
    */
    _longPressThreshold: {
        value: 1000
    },

    /**
     * The number of milliseconds a key must be pressed in order to dispatch a
     * longKeyPress event.
     * @type {number}
     * @default 1000
     */
    longPressThreshold: {
        get: function () {
            return this._longPressThreshold;
        },
        set: function (value) {
            if (value > 0 &amp;&amp; value !== this._longPressThreshold) {
                this._longPressThreshold = value;
                if (this._longPressThreshold > this._cleanupThreshold - 100) {
                    this._cleanupThreshold = this._longPressThreshold + 100;
                } else {
                    this._cleanupThreshold = 2000;
                }
            }
        }
    },

    /**
     * Register a composerKey.
     * @function
     * @param {Object} keyComposer. The key to register.
     */
    registerKey: {
        value: function (keyComposer) {
                // validates the keys:
            var normalizedKeys = this._normalizeKeySequence(keyComposer.keys),
                modifiersAndKey,
                map = this._composerKeyMap,
                mapModifiersEntry,
                mapKeyEntry,
                keyAlreadyRegistered = false,
                entry,
                i;

            if (normalizedKeys) {
                modifiersAndKey = this._convertKeysToModifiersAndKeyCode(normalizedKeys);

                mapModifiersEntry = map[modifiersAndKey.modifiers];
                if (!mapModifiersEntry) {
                    mapModifiersEntry = map[modifiersAndKey.modifiers] = {};
                }
                mapKeyEntry = mapModifiersEntry[modifiersAndKey.keyCode];
                if (mapKeyEntry) {
                    for (i in mapKeyEntry) {
                        if (mapKeyEntry.hasOwnProperty(i)) {
                            entry = mapKeyEntry[i];
                            if (entry.object === keyComposer) {
                                entry.refCount ++;
                                keyAlreadyRegistered = true;
                                break;
                            }
                        }
                    }
                    if (!keyAlreadyRegistered) {
                        mapKeyEntry.push({object: keyComposer, refCount: 1});
                    }
                } else {
                    mapModifiersEntry[modifiersAndKey.keyCode] = [{object: keyComposer, refCount: 1}];
                }

                keyComposer._modifiers = modifiersAndKey.modifiers;
                keyComposer._keyCode = modifiersAndKey.keyCode;

                this._registerListeners();
            }
        }
    },

    /**
     * Unregister a composerKey. if a key has been registered multiple time,
     * unregister must be called the same amount of time before the key is
     * actually unregistered.
     * @function
     * @param {Object} keyComposer The key to unregister.
     */
    unregisterKey: {
        value: function (keyComposer) {
            var map = this._composerKeyMap,
                mapModifiersEntry,
                mapKeyEntry,
                entry,
                i;

            mapModifiersEntry = map[keyComposer._modifiers];
            if (mapModifiersEntry) {
                mapKeyEntry = mapModifiersEntry[keyComposer._keyCode];
                for (i in mapKeyEntry) {
                    if (mapKeyEntry.hasOwnProperty(i)) {
                        entry = mapKeyEntry[i];
                        if (entry.object === keyComposer) {
                            entry.refCount --;
                            if (entry.refCount &lt;= 0) {
                                mapKeyEntry.splice(i, 1);
                                if (mapKeyEntry.length === 0) {
                                    delete mapModifiersEntry[keyComposer._keyCode];
                                    if (Object.keys(mapModifiersEntry).length === 0) {
                                        delete map[keyComposer._modifiers];
                                        if (Object.keys(map).length === 0) {
                                            this._unregisterListeners();
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },

    constructor: {
        value: function () {
            var userAgent = global.navigator ? global.navigator.userAgent : "",
                code;

            if (defaultKeyManager) {
                console.warn("Rather than creating a new KeyManager object, you might want to use the default key manager");
            }

            // Browser detection
            if (userAgent.match(/ firefox\//i)) {
                this._firefox = true;
            } else if (userAgent.match(/ appleWebkit\//i)) {
                this._webkit = true;
                if (userAgent.match(/ chrome\//i)) {
                    this._chrome = true;
                }
            } else if (userAgent.match(/^opera\//i)) {
                this._opera = true;
            }

            // Platform Detection
            if (userAgent.match(/macintosh/i)) {
                this._mac = true;
                if (this._opera) {
                    this._operaMac = true;
                }
            }

            // Handle the platform specific COMMAND modifier
            if (this._mac) {
                MODIFIERS.command = MODIFIERS.meta;
            } else {
                MODIFIERS.command = MODIFIERS.control;
            }

            // Patch the KeyCode dictionary for Opera or Firefox
            if (this._operaMac) {
                for (code in OPERAMAC_KEYNAMES_TO_KEYCODES) {
                    if (OPERAMAC_KEYNAMES_TO_KEYCODES.hasOwnProperty(code)) {
                        KEYNAMES_TO_KEYCODES[code] = OPERAMAC_KEYNAMES_TO_KEYCODES[code];   
                    }
                }
            }
            if (this._firefox) {
                for (code in FIREFOX_KEYNAMES_TO_KEYCODES) {
                    if (FIREFOX_KEYNAMES_TO_KEYCODES.hasOwnProperty(code)) {
                        KEYNAMES_TO_KEYCODES[code] = FIREFOX_KEYNAMES_TO_KEYCODES[code];   
                    }
                }
            }

            var keyName;

            // Generate the KEYNAMES dictionary
            KEYCODES_TO_KEYNAMES = {};
            for (keyName in KEYNAMES_TO_KEYCODES) {
                if (KEYNAMES_TO_KEYCODES.hasOwnProperty(keyName)) {
                    code = KEYNAMES_TO_KEYCODES[keyName];
                    if (KEYCODES_TO_KEYNAMES[code] === undefined) {
                        // If we have more than one name for a keycode, use only the first one
                        KEYCODES_TO_KEYNAMES[code] = keyName;
                    }   
                }
            }

            // Generate the NORMALIZED_CHARS dictionary
            NORMALIZED_CHARS = {};
            for (keyName in NORMALIZED_KEYS) {
                if (NORMALIZED_KEYS.hasOwnProperty(keyName)) {
                    code = NORMALIZED_KEYS[keyName];
                    if (NORMALIZED_CHARS[code] === undefined) {
                        // If we have more than one name for a char, use only the first one
                        NORMALIZED_CHARS[code] = keyName;
                    }
                }
            }

            this._shiftKey = false;
            this._altKey = false;
            this._metaKey = false;
            this._ctrlKey = false;
        }
    },

    captureKeydown: {
        value: function (event) {
            var keyCode,
                identifierCode,
                keyIdentifier = event.key || event.keyIdentifier,
                submap,
                stopped = false;

            // console.log("  captureKeydown:", event.keyCode, event.charCode, event.keyIdentifier);

            this._preprocessKeyEvent(event);
            // console.log("KEYDOWN MODIFIERS:", this._modifiers, "KEYCODE:", this._keyCode);

            submap = this._submap;
            if (submap) {
                keyCode = this._keyCode;

                // Check the keyCode for a match...
                if (keyCode &amp;&amp; submap[keyCode]) {
                    stopped = this._dispatchComposerKeyMatches(submap[keyCode], event);
                }

                // Check the keyIdentifier for a match
                if (!stopped &amp;&amp; keyIdentifier) {
                    identifierCode = KEYNAMES_TO_KEYCODES[keyIdentifier.toLowerCase()] ||
                        this._decodeKeyIdentifier(keyIdentifier);
                    if (identifierCode &amp;&amp; identifierCode !== keyCode &amp;&amp; submap[identifierCode]) {
                        this._dispatchComposerKeyMatches(submap[identifierCode], event);
                    }
                }
            }

            this._setupCleanupTimer();
        }
    },

    captureKeypress: {
        value: function (event) {
            var charCode = event.charCode,
                keyIdentifier = event.key || event.keyIdentifier,
                keyCode,
                identifierCode,
                submap,
                stopped = false;

            // console.log("  captureKeypress:", event.keyCode, event.charCode, event.keyIdentifier, this._modifiers);
            this._preprocessKeyEvent(event);

            submap = this._submap;
            // console.log("KEYPRESS MODIFIERS:", this._modifiers, this._keyCode, event.charCode);

            if (submap) {
                keyCode = this._keyCode;

                // Check the keyCode for a match...
                if (keyCode &amp;&amp; submap[keyCode]) {
                    stopped = this._dispatchComposerKeyMatches(submap[keyCode], event);
                }

                // Check the charCode for a match...
                if (!stopped &amp;&amp; charCode &amp;&amp; charCode !== keyCode &amp;&amp; submap[charCode]) {
                    stopped = this._dispatchComposerKeyMatches(submap[charCode], event);
                }

                // Check the keyIdentifier for a match
                if (!stopped &amp;&amp; keyIdentifier) {
                    identifierCode = KEYNAMES_TO_KEYCODES[keyIdentifier.toLowerCase()] ||
                        this._decodeKeyIdentifier(keyIdentifier);
                    if (identifierCode &amp;&amp; identifierCode !== keyCode &amp;&amp; submap[identifierCode]) {
                        this._dispatchComposerKeyMatches(submap[identifierCode], event);
                    }
                }
            }

            this._setupCleanupTimer();
        }
    },

    captureKeyup: {
        value: function (event) {
            var keyCode = event.keyCode,
                keyIdentifier = event.key || event.keyIdentifier,
                identifierCode,
                submap,
                dispatchedKeyCode = 0,
                triggeredKey,
                uuid,
                stopped = false;

            // Dispatch a keyup event for all composerKey triggered during the keydown/keypress phase
            // and for the current match

            // console.log("  captureKeyup:", event.keyCode, event.charCode, event.keyIdentifier);
            this._preprocessKeyEvent(event);
            submap = this._submap;

            // console.log("KEYUP MODIFIERS:", this._modifiers, this._keyCode);
            if (submap) {
                keyCode = this._keyCode;

                // Check the keyCode for a match...
                if (keyCode &amp;&amp; submap[keyCode]) {
                    stopped = this._dispatchComposerKeyMatches(submap[keyCode], event);
                    dispatchedKeyCode = keyCode;
                }

                // Check the keyIdentifier for a match
                if (!stopped &amp;&amp; keyIdentifier) {
                    identifierCode = KEYNAMES_TO_KEYCODES[keyIdentifier.toLowerCase()] ||
                        this._decodeKeyIdentifier(keyIdentifier);
                    if (identifierCode &amp;&amp; identifierCode !== dispatchedKeyCode &amp;&amp; submap[identifierCode]) {
                        stopped = this._dispatchComposerKeyMatches(submap[identifierCode], event);
                    }
                }
            }

            // In case the user release the modifier key before releasing the main key, we still need to fire a keyup event
            if (!stopped) {
                for (uuid in this._triggeredKeys) {
                    if (this._triggeredKeys.hasOwnProperty(uuid)) {
                        triggeredKey = this._triggeredKeys[uuid];
                        if (triggeredKey._keyCode === keyCode || triggeredKey._keyCode === identifierCode) {
                            this._dispatchComposerKeyMatches([triggeredKey], event);
                        }
                    }
                }
            }

            this._cleanup();
        }
    },

    _normalizeKeySequence: {
        value: function (keySequence) {
            var modifiersOrder = [MODIFIERS.meta.name, MODIFIERS.alt.name, MODIFIERS.control.name, MODIFIERS.shift.name],
                keys = keySequence.toLowerCase().replace(/ /g, "").replace(/\+\+/g, "+add").split("+"),
                nbrKeys = keys.length,
                key,
                normalizedKeys = [],
                i;

            for (i = 0; i &lt; nbrKeys - 1; i ++) {
                // convert alias
                key = keys[i];
                key = KEYNAMES_ALIASES[key] || key;

                // make sure it's a modifier
                key = MODIFIERS[key];
                if (key) {
                    normalizedKeys.push(key.name);
                } else {
                    console.warn("Invalid key sequence (modifier):", keySequence);
                    return null;
                }
            }

            normalizedKeys.sort(function (a, b) {
                return modifiersOrder.indexOf(a) - modifiersOrder.indexOf(b);
            });

            key = keys[nbrKeys - 1];
            if (key.length > 1 &amp;&amp; !KEYNAMES_TO_KEYCODES[key]) {
                console.warn("Invalid key sequence (key):", keySequence, key);
                return null;
            }

            if (normalizedKeys.length) {
                return normalizedKeys.join("+") + "+" + key;
            } else {
                return key;
            }
        }
    },

    _preprocessKeyEvent: {
        value: function (event) {
            var thisRef = this,
                eventType = event.type,
                keyCode = event.keyCode,
                keyIdentifier = event.key || event.keyIdentifier,
                modifiers,
                value;

            if (this._operaMac) {
                if (this._operaModifierTimeout) {
                    clearTimeout(this._operaModifierTimeout);
                    this._operaModifierTimeout = null;
                }
            }

            if (eventType === "keydown" || eventType === "keyup") {
                if (this._operaMac) {
                    // Opera Mac is not very good at keeping track of which modifiers are pressed or not!
                    value = (eventType === "keydown");
                    if (keyCode === KEYNAMES_TO_KEYCODES.shift) {
                        this._shiftKey = value;
                    } else if (keyCode === KEYNAMES_TO_KEYCODES.alt) {
                        this._altKey = value;
                    } else if (keyCode === KEYNAMES_TO_KEYCODES.meta) {
                        if (this._mac) {
                            this._metaKey = value;
                        }
                    } else if (keyCode === KEYNAMES_TO_KEYCODES.control) {
                        this._ctrlKey = value;
                    }

                    if (eventType === "keyup") {
                        // Setup a timeout to force reset the modifier state ~3 seconds after the last key up
                        // This is to recover when we miss a keyup event which seems to occurs once in a while with Opera
                        this._operaModifierTimeout = setTimeout(function (){
                            thisRef._shiftKey = false;
                            thisRef._altKey = false;
                            thisRef._metaKey = false;
                            thisRef._ctrlKey = false;
                            thisRef._operaModifierTimeout = null;
                        }, this._cleanupThreshold + 1000);
                    }
                } else {
                    this._shiftKey = event.shiftKey;
                    this._altKey = event.altKey;
                    this._metaKey = event.metaKey;
                    this._ctrlKey = event.ctrlKey;
                }
            }

            if (this._mac &amp;&amp; this._webkit &amp;&amp; keyCode === KEYNAMES_TO_KEYCODES.contextmenu) {
                // Webkit browsers will interpret the right command key as the window context-menu but will keep the
                // meta modifier on preventing us from having a "context-menu" shortcut. We need to clear the meta flag
                // (the limitation is that we wont be able to support a "META+CONTEXT-MENU" shortcut
                this._metaKey = false;
            }

            if (this._chrome) {
                // Chrome (at least on Mac) generate the same keycode for the NumKeyPad = and NumKeyPad +
                if (!this._shiftKey &amp;&amp; keyCode === KEYNAMES_TO_KEYCODES.plus &amp;&amp; (keyIdentifier === "U+002B" || keyIdentifier === "+")) {
                    event.keyCode = KEYNAMES_TO_KEYCODES.add;
                }
            }

            this._modifiers = modifiers = (this._shiftKey ? MODIFIERS.shift.value : 0) +
                (this._altKey ? MODIFIERS.alt.value : 0) +
                (this._metaKey ? MODIFIERS.meta.value : 0) +
                (this._ctrlKey ? MODIFIERS.control.value : 0);

            this._submap = this._composerKeyMap[modifiers];
            this._keyCode = event.keyCode;
            this._keyIdentifier = keyIdentifier;
        }
    },

    _registerListeners: {
        value: function () {
            if (!this._keyEventsListenerInstalled) {
                window.addEventListener("keydown", this, true);
                window.addEventListener("keypress", this, true);
                window.addEventListener("keyup", this, true);
                this._keyEventsListenerInstalled = true;
            }
        }
    },

    _unregisterListeners: {
        value: function () {
            if (this._keyEventsListenerInstalled) {
                window.removeEventListener("keydown", this, true);
                window.removeEventListener("keypress", this, true);
                window.removeEventListener("keyup", this, true);
                this._keyEventsListenerInstalled = false;
            }
        }
    },

    _dispatchComposerKeyMatches: {
        value: function (matches, event) {
            var thisRef = this,
                stopped = false,
                keyUp = event.type === "keyup",
                keyDown = event.type === "keydown",
                eventType = keyUp ? KEYRELEASE_EVENT_TYPE : KEYPRESS_EVENT_TYPE,
                nbrMatches = matches.length,
                keyComposer,
                keyComposerEvent,
                triggeredKeys,
                i;

            // Slice the array so that keys registered or unregistered during
            // dispatch don't break the dispatching
            matches = matches.slice();

            // matches could be either an array of matches or an array of keyComposers
            for (i = 0; i &lt; nbrMatches &amp;&amp; !stopped; i ++) {
                keyComposer = matches[i].object || matches[i];

                // Make sure keyboard event's target is a descendant of the keyComposer's element
                var target = event.target,
                    element = keyComposer.element,
                    onTarget = (keyComposer.element === window);

                while (!onTarget) {
                    onTarget = (target === element);

                    if (target === document) {
                        break;
                    } else {
                        target = target.parentElement;
                        if (!target) {
                            target = document;
                        }
                    }
                }

                // Most components can't receive key events directly: the events target the window,
                // but we should also fire them on composers of the activeTarget component
                if (!onTarget &amp;&amp; defaultEventManager.activeTarget !== keyComposer.component) {
                    continue;
                }

                if (keyUp) {
                    triggeredKeys = Object.keys(this._triggeredKeys);
                    if (triggeredKeys.indexOf(keyComposer.uuid) === -1) {
                        // Do not generate a keyup event if the composerKey has not been triggered on keydown or keypress
                        continue;
                    }

                    if (keyComposer._longPressTimeout) {
                        clearTimeout(keyComposer._longPressTimeout);
                        keyComposer._longPressTimeout = null;
                        delete this._longPressKeys[keyComposer.uuid];
                    }
                } else {
                    if (keyDown) {
                        // Reset trigger
                        delete this._triggeredKeys[keyComposer.uuid];
                    } else if (this._triggeredKeys[keyComposer.uuid]) {
                        // that key has already been triggered, let's ignore it...
                        continue;
                    }

                    if (keyComposer._shouldDispatchLongPress &amp;&amp; !keyComposer._longPressTimeout) {

                        /* jshint loopfunc:true */
                        keyComposer._longPressTimeout = setTimeout(function () {
                            var longPressEvent = MutableEvent.fromEvent(longPressEvent);
                            longPressEvent.type = LONGKEYPRESS_EVENT_TYPE;
                            longPressEvent.activeElement = event.target;
                            longPressEvent.identifier = keyComposer.identifier;

                            keyComposer._longPressTimeout = null;
                            keyComposer.dispatchEvent(longPressEvent);
                            delete thisRef._longPressKeys[keyComposer.uuid];
                        }, this._longPressThreshold);   
                        /* jshint loopfunc:false */

                        // Let's remember any longKeyPress key waiting for timeout
                        this._longPressKeys[keyComposer.uuid] = keyComposer;
                    }
                }
                
                keyComposerEvent = MutableEvent.fromEvent(event);
                keyComposerEvent.type = eventType;
                keyComposerEvent.activeElement = event.target;
                keyComposerEvent.identifier = keyComposer.identifier;
                keyComposerEvent.keyComposer = keyComposer;

                keyComposer.dispatchEvent(keyComposerEvent);

                if (keyComposerEvent.propagationStopped) {
                    stopped = true;
                }

                if (keyUp) {
                    // We already dispatched a keyup event for this key, let's remove it
                    delete this._triggeredKeys[keyComposer.uuid];
                } else {
                    // We need to remember any composerKey triggered during the keydown phase in order to generate an equivalent keyup
                    this._triggeredKeys[keyComposer.uuid] = keyComposer;
                }
            }

            // if the composer key even has been stopped, we need clean the list of triggered keys as we wont get a keyup event anymore.
            // We need also stop pending longPress key
            if (stopped) {
                for (i = (keyUp ? i : 0); i &lt; nbrMatches; i ++) {
                    keyComposer = matches[i].object || matches[i];
                    delete this._triggeredKeys[keyComposer.uuid];

                    if (keyComposer._longPressTimeout) {
                        clearTimeout(keyComposer._longPressTimeout);
                        keyComposer._longPressTimeout = null;
                        delete this._longPressKeys[keyComposer.uuid];
                    }
                }
            }

            return stopped;
        }
    },

    _cleanup: {
        value: function () {
            var keyComposer,
                i;

            if (this._cleanupTimeout) {
                clearTimeout(this._cleanupTimeout);
            }

            for (i in this._triggeredKeys) {
                if (this._triggeredKeys.hasOwnProperty(i)) {
                    delete this._triggeredKeys[i];
                }
            }

            for (i in this._longPressKeys) {
                if (this._longPressKeys.hasOwnProperty(i)) {
                    keyComposer = this._longPressKeys[i];
                    clearTimeout(keyComposer._longPressTimeout);
                    keyComposer._longPressTimeout = null;
                    delete this._longPressKeys[i];
                }
            }

            this._cleanupTimeout = null;
        }
    },

    _setupCleanupTimer: {
        value: function () {
            var thisRef = this;

            // When a keydown event is stopped, we will not received the corresponding keyup event.
            // If we haven't detected any key events for 2 seconds, let's presume the user is done using the keyboard
            // and do some internal cleanup in case we missed some keyup events.

            if (this._cleanupTimeout) {
                clearTimeout(this._cleanupTimeout);
            }
            this._cleanupTimeout = setTimeout(function () {
                thisRef._cleanup();
            }, this._cleanupThreshold);
        }
    },

    _convertKeysToModifiersAndKeyCode: {
        value: function (keys) {
            var nbrKeys,
                key,
                i,
                keyCode = 0,
                modifiers = 0;

            keys = keys.toLowerCase().replace(/ /g, "").replace(/\+\+/g, "+add").split("+");
            nbrKeys = keys.length;

            // Convert the keys into a modifiers mask
            for (i = 0; i &lt; nbrKeys - 1; i ++) {
                // convert alias
                key = keys[i];
                key = KEYNAMES_ALIASES[key] || key;

                // make sure it's a modifier
                key = MODIFIERS[key];
                if (key) {
                    modifiers |= key.value;
                } else {
                    console.warn("Invalid Key sequence:", keys);
                    return null;
                }
            }

            // Extract the final key
            key = keys[nbrKeys - 1];
            key = NORMALIZED_CHARS[key] || key;
            key = NORMALIZED_KEYS[key] || key;  // This is needed for browsers that don't use W3C Optional Key Codes

            if (key.length > 1) {
                keyCode = KEYNAMES_TO_KEYCODES[key];

                // If the key append to be a modifier, we need adjust modifiers accordingly
                key = MODIFIERS[KEYNAMES_ALIASES[key] || key];
                if (key) {
                    modifiers |= key.value;
                }
            } else {
                keyCode = key.toUpperCase().charCodeAt(0);
            }

            return {modifiers: modifiers, keyCode: keyCode};
        }
    },

    _decodeKeyIdentifier: {
        value: function (identifier) {
            if (identifier.match(/U\+/)) {
                return parseInt(identifier.substring(2), 16);
            }
        }
    }
});

Montage.defineProperty(exports, "defaultKeyManager", {
    get: function () {
        if (!defaultKeyManager) {
            defaultKeyManager = new KeyManager();
        }
        return defaultKeyManager;
    }
});

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-_._foo.reel_.html">"./foo.reel"</a></li><li><a href="module-_montage_ui_condition.reel_.html">"montage/ui/condition.reel"</a></li><li><a href="module-_montage_ui_flow.reel_.html">"montage/ui/flow.reel"</a></li><li><a href="module-_montage_ui_input-radio.reel_.html">"montage/ui/input-radio.reel"</a></li><li><a href="module-_montage_ui_label.reel_.html">"montage/ui/label.reel"</a></li><li><a href="module-_montage_ui_loader.reel_.html">"montage/ui/loader.reel"</a></li><li><a href="module-_montage_ui_native_button.reel_.html">"montage/ui/native/button.reel"</a></li><li><a href="module-_montage_ui_native_checkbox.reel_.html">"montage/ui/native/checkbox.reel"</a></li><li><a href="module-_montage_ui_native_image.reel_.html">"montage/ui/native/image.reel"</a></li><li><a href="module-_montage_ui_native_input-date.reel_.html">"montage/ui/native/input-date.reel"</a></li><li><a href="module-_montage_ui_native_input-number.reel_.html">"montage/ui/native/input-number.reel"</a></li><li><a href="module-_montage_ui_native_input-range.reel_.html">"montage/ui/native/input-range.reel"</a></li><li><a href="module-_montage_ui_native_input-text.reel_.html">"montage/ui/native/input-text.reel"</a></li><li><a href="module-_montage_ui_native_progress.reel_.html">"montage/ui/native/progress.reel"</a></li><li><a href="module-_montage_ui_native_select.reel_.html">"montage/ui/native/select.reel"</a></li><li><a href="module-_montage_ui_native_textarea.reel_.html">"montage/ui/native/textarea.reel"</a></li><li><a href="module-_montage_ui_repetition.reel_.html">"montage/ui/repetition.reel"</a></li><li><a href="module-_montage_ui_segmented-bar.reel_.html">"montage/ui/segmented-bar.reel"</a></li><li><a href="module-_montage_ui_slot.reel_.html">"montage/ui/slot.reel"</a></li><li><a href="module-_montage_ui_substitution.reel_.html">"montage/ui/substitution.reel"</a></li><li><a href="module-_montage_ui_succession.reel_.html">"montage/ui/succession.reel"</a></li><li><a href="module-_montage_ui_text.reel_.html">"montage/ui/text.reel"</a></li><li><a href="module-_native_ui_anchor.reel_.html">"native/ui/anchor.reel"</a></li><li><a href="module-_ui_main.reel_.html">"ui/main.reel"</a></li><li><a href="module-_ui_modal-overlay.reel_.html">"ui/modal-overlay.reel"</a></li><li><a href="module-_ui_overlay.reel_.html">"ui/overlay.reel"</a></li><li><a href="module-_ui_segmented-bar.reel_segment.reel_.html">"ui/segmented-bar.reel/segment.reel"</a></li><li><a href="module-core_application.html">core/application</a></li><li><a href="module-montage_composer_composer.html">montage/composer/composer</a></li><li><a href="module-montage_composer_key-composer.html">montage/composer/key-composer</a></li><li><a href="module-montage_composer_press-composer.html">montage/composer/press-composer</a></li><li><a href="module-montage_composer_swipe-composer.html">montage/composer/swipe-composer</a></li><li><a href="module-montage_composer_translate-composer.html">montage/composer/translate-composer</a></li><li><a href="module-montage_core_bindings.html">montage/core/bindings</a></li><li><a href="module-montage_core_bitfield.html">montage/core/bitfield</a></li><li><a href="module-montage_core_converter_bytes-converter.html">montage/core/converter/bytes-converter</a></li><li><a href="module-montage_core_converter_camel-case-converter.html">montage/core/converter/camel-case-converter</a></li><li><a href="module-montage_core_converter_converter.html">montage/core/converter/converter</a></li><li><a href="module-montage_core_converter_currency-converter.html">montage/core/converter/currency-converter</a></li><li><a href="module-montage_core_converter_date-converter.html">montage/core/converter/date-converter</a></li><li><a href="module-montage_core_converter_invert-converter.html">montage/core/converter/invert-converter</a></li><li><a href="module-montage_core_converter_kebab-case-converter.html">montage/core/converter/kebab-case-converter</a></li><li><a href="module-montage_core_converter_lower-case-converter.html">montage/core/converter/lower-case-converter</a></li><li><a href="module-montage_core_converter_new-line-to-br-converter.html">montage/core/converter/new-line-to-br-converter</a></li><li><a href="module-montage_core_converter_number-converter.html">montage/core/converter/number-converter</a></li><li><a href="module-montage_core_converter_number-to-nearest-integer-converter.html">montage/core/converter/number-to-nearest-integer-converter</a></li><li><a href="module-montage_core_converter_snake-case-converter.html">montage/core/converter/snake-case-converter</a></li><li><a href="module-montage_core_converter_trim-converter.html">montage/core/converter/trim-converter</a></li><li><a href="module-montage_core_converter_upper-case-converter.html">montage/core/converter/upper-case-converter</a></li><li><a href="module-montage_core_core.html">montage/core/core</a></li><li><a href="module-montage_core_deprecate.html">montage/core/deprecate</a></li><li><a href="module-montage_core_dom.html">montage/core/dom</a></li><li><a href="module-montage_core_enum.html">montage/core/enum</a></li><li><a href="module-montage_core_event_action-event-listener.html">montage/core/event/action-event-listener</a></li><li><a href="module-montage_core_event_event-manager.html">montage/core/event/event-manager</a></li><li><a href="module-montage_core_event_key-manager.html">montage/core/event/key-manager</a></li><li><a href="module-montage_core_event_mutable-event.html">montage/core/event/mutable-event</a></li><li><a href="module-montage_core_exception.html">montage/core/exception</a></li><li><a href="module-montage_core_extras_date.html">montage/core/extras/date</a></li><li><a href="module-montage_core_extras_function.html">montage/core/extras/function</a></li><li><a href="module-montage_core_extras_object.html">montage/core/extras/object</a></li><li><a href="module-montage_core_extras_string.html">montage/core/extras/string</a></li><li><a href="module-montage_core_gate.html">montage/core/gate</a></li><li><a href="module-montage_core_geometry_cubic-bezier.html">montage/core/geometry/cubic-bezier</a></li><li><a href="module-montage_core_geometry_point.html">montage/core/geometry/point</a></li><li><a href="module-montage_core_localizer.html">montage/core/localizer</a></li><li><a href="module-montage_core_logger.html">montage/core/logger</a></li><li><a href="module-montage_core_meta_validation-rule.html">montage/core/meta/validation-rule</a></li><li><a href="module-montage_core_module-reference.html">montage/core/module-reference</a></li><li><a href="module-montage_core_object-controller.html">montage/core/object-controller</a></li><li><a href="module-montage_core_range-controller.html">montage/core/range-controller</a></li><li><a href="module-montage_core_serialization.html">montage/core/serialization</a></li><li><a href="module-montage_core_serialization_serializer_montage-serializer.html">montage/core/serialization/serializer/montage-serializer</a></li><li><a href="module-montage_core_shim_array.html">montage/core/shim/array</a></li><li><a href="module-montage_core_shim_object.html">montage/core/shim/object</a></li><li><a href="module-montage_core_shim_string.html">montage/core/shim/string</a></li><li><a href="module-montage_core_state-chart.html">montage/core/state-chart</a></li><li><a href="module-montage_core_undo-manager.html">montage/core/undo-manager</a></li><li><a href="module-montage_core_uuid.html">montage/core/uuid</a></li><li><a href="module-montage_data_object-property.html">montage/data/object-property</a></li><li><a href="module-montage_serialization_serialization.html">montage/serialization/serialization</a></li><li><a href="module-montage_ui_base_abstract-button.html">montage/ui/base/abstract-button</a></li><li><a href="module-montage_ui_base_abstract-control.html">montage/ui/base/abstract-control</a></li><li><a href="module-montage_ui_check-control.html">montage/ui/check-control</a></li><li><a href="module-montage_ui_component.html">montage/ui/component</a></li><li><a href="module-montage_ui_control.html">montage/ui/control</a></li><li><a href="module-montage_ui_controller_media-controller.html">montage/ui/controller/media-controller</a></li><li><a href="module-montage_ui_passage.html">montage/ui/passage</a></li><li><a href="module-montage_ui_text-input.html">montage/ui/text-input</a></li><li><a href="montage_ui_base_abstract-image.module_reel.html">reel</a></li><li><a href="montage_ui_base_abstract-select.module_reel.html">reel</a></li><li><a href="montage_ui_base_abstract-slider.module_reel.html">reel</a></li><li><a href="montage_ui_base_abstract-toggle-button.module_reel.html">reel</a></li><li><a href="montage_ui_base_abstract-toggle-switch.module_reel.html">reel</a></li><li><a href="montage_ui_base_abstract-video.module_reel.html">reel</a></li><li><a href="ui_alert.module_reel.html">reel</a></li><li><a href="ui_base_abstract-progress-bar.module_js.html">js</a></li><li><a href="ui_caption.module_reel.html">reel</a></li><li><a href="ui_draggable-square.module_reel.html">reel</a></li><li><a href="ui_list.module_reel.html">reel</a></li><li><a href="ui_main.module_reel.html">reel</a></li><li><a href="ui_montage-studio-loader.module_reel.html">reel</a></li><li><a href="ui_press-composer-layers.module_reel.html">reel</a></li><li><a href="ui_square.module_reel.html">reel</a></li><li><a href="ui_tree-list.module_reel.html">reel</a></li><li><a href="-_rotation-composer.module_reel.html">reel</a></li></ul><h3>Externals</h3><ul><li><a href="external-Array.html">Array</a></li><li><a href="external-Function.html">Function</a></li><li><a href="external-Object.html">Object</a></li><li><a href="external-RegExp.html">RegExp</a></li><li><a href="external-String.html">String</a></li></ul><h3>Classes</h3><ul><li><a href="AbstractCheckbox.html">AbstractCheckbox</a></li><li><a href="AbstractLink.html">AbstractLink</a></li><li><a href="AbstractNumberField.html">AbstractNumberField</a></li><li><a href="AbstractRadioButton.html">AbstractRadioButton</a></li><li><a href="AbstractTextArea.html">AbstractTextArea</a></li><li><a href="AbstractTextField.html">AbstractTextField</a></li><li><a href="Alias.html">Alias</a></li><li><a href="Authorization.html">Authorization</a></li><li><a href="AuthorizationManager.html">AuthorizationManager</a></li><li><a href="AuthorizationService.html">AuthorizationService</a></li><li><a href="BlueprintDataMapping.html">BlueprintDataMapping</a></li><li><a href="ConnectionDescriptor.html">ConnectionDescriptor</a></li><li><a href="DataIdentifier.html">DataIdentifier</a></li><li><a href="DataMapping.html">DataMapping</a></li><li><a href="DataObjectDescriptor.html">DataObjectDescriptor</a></li><li><a href="DataOperation.html">DataOperation</a></li><li><a href="DataOrdering.html">DataOrdering</a></li><li><a href="DataPropertyDescriptor.html">DataPropertyDescriptor</a></li><li><a href="DataProvider.html">DataProvider</a></li><li><a href="DataQuery.html">DataQuery</a></li><li><a href="DataSelector.html">DataSelector</a></li><li><a href="DataService.html">DataService</a></li><li><a href="DataStream.html">DataStream</a></li><li><a href="DerivedDescriptor.html">DerivedDescriptor</a></li><li><a href="ElementReference.html">ElementReference</a></li><li><a href="Enumeration.html">Enumeration</a></li><li><a href="EventDescriptor.html">EventDescriptor</a></li><li><a href="ExpressionDataMapping.html">ExpressionDataMapping</a></li><li><a href="Flow.html">Flow</a></li><li><a href="FlowTranslateComposer.html">FlowTranslateComposer</a></li><li><a href="HttpService.html">HttpService</a></li><li><a href="HttpService.DataType.html">DataType</a></li><li><a href="ImageGallery.html">ImageGallery</a></li><li><a href="ImageGalleryItem.html">ImageGalleryItem</a></li><li><a href="IndexedDBDataService.html">IndexedDBDataService</a></li><li><a href="Main.html">Main</a></li><li><a href="MappingRule.html">MappingRule</a></li><li><a href="Message.html">Message</a></li><li><a href="MessageFormat.html">MessageFormat</a></li><li><a href="Model.html">Model</a></li><li><a href="ModelGroup.html">ModelGroup</a></li><li><a href="module-_._foo.reel_.Foo.html">Foo</a></li><li><a href="module-_montage_ui_condition.reel_-Condition.html">Condition</a></li><li><a href="module-_montage_ui_flow.reel_-Flow.html">Flow</a></li><li><a href="module-_montage_ui_loader.reel_-Loader.html">Loader</a></li><li><a href="module-_montage_ui_native_button.reel_.Button.html">Button</a></li><li><a href="module-_montage_ui_native_checkbox.reel_.Checkbox.html">Checkbox</a></li><li><a href="module-_montage_ui_native_image.reel_.Image.html">Image</a></li><li><a href="module-_montage_ui_native_input-date.reel_.InputDate.html">InputDate</a></li><li><a href="module-_montage_ui_native_input-number.reel_.InputNumber.html">InputNumber</a></li><li><a href="module-_montage_ui_native_input-radio.reel_.InputRadio.html">InputRadio</a></li><li><a href="module-_montage_ui_native_input-range.reel_.InputRange.html">InputRange</a></li><li><a href="module-_montage_ui_native_input-text.reel_.InputText.html">InputText</a></li><li><a href="module-_montage_ui_native_progress.reel_.Progress.html">Progress</a></li><li><a href="module-_montage_ui_native_select.reel_.Select.html">Select</a></li><li><a href="module-_montage_ui_native_textarea.reel_.Textarea.html">Textarea</a></li><li><a href="module-_montage_ui_repetition.reel_-Iteration.html">Iteration</a></li><li><a href="module-_montage_ui_repetition.reel_-Repetition.html">Repetition</a></li><li><a href="module-_montage_ui_segmented-bar.reel_-SegmentedBar.html">SegmentedBar</a></li><li><a href="module-_montage_ui_slot.reel_-Slot.html">Slot</a></li><li><a href="module-_montage_ui_substitution.reel_-Substitution.html">Substitution</a></li><li><a href="module-_montage_ui_succession.reel_-Succession.html">Succession</a></li><li><a href="module-_ui_anchor.reel_.Anchor.html">Anchor</a></li><li><a href="module-_ui_main.reel_.Main.html">Main</a></li><li><a href="module-_ui_modal-overlay.reel_-ModalOverlay.html">ModalOverlay</a></li><li><a href="module-_ui_overlay.reel_-Overlay.html">Overlay</a></li><li><a href="module-_ui_segmented-bar.reel_segment.reel_.Segment.html">Segment</a></li><li><a href="module-core_application-Application.html">Application</a></li><li><a href="module-montage_composer_composer-Composer.html">Composer</a></li><li><a href="module-montage_composer_key-composer-KeyComposer.html">KeyComposer</a></li><li><a href="module-montage_composer_press-composer-PressComposer.html">PressComposer</a></li><li><a href="module-montage_composer_swipe-composer-SwipeComposer.html">SwipeComposer</a></li><li><a href="module-montage_composer_translate-composer-TranslateComposer.html">TranslateComposer</a></li><li><a href="module-montage_core_bitfield-BitField.html">BitField</a></li><li><a href="module-montage_core_converter_bytes-converter-BytesConverter.html">BytesConverter</a></li><li><a href="module-montage_core_converter_camel-case-converter-CamelCaseConverter.html">CamelCaseConverter</a></li><li><a href="module-montage_core_converter_converter-Converter.html">Converter</a></li><li><a href="module-montage_core_converter_converter-Validator.html">Validator</a></li><li><a href="module-montage_core_converter_currency-converter-CurrencyConverter.html">CurrencyConverter</a></li><li><a href="module-montage_core_converter_date-converter-DateConverter.html">DateConverter</a></li><li><a href="module-montage_core_converter_date-converter-DateValidator.html">DateValidator</a></li><li><a href="module-montage_core_converter_invert-converter-InvertConverter.html">InvertConverter</a></li><li><a href="module-montage_core_converter_kebab-case-converter-KebabCaseConverter.html">KebabCaseConverter</a></li><li><a href="module-montage_core_converter_lower-case-converter-LowerCaseConverter.html">LowerCaseConverter</a></li><li><a href="module-montage_core_converter_new-line-to-br-converter-NewLineToBrConverter.html">NewLineToBrConverter</a></li><li><a href="module-montage_core_converter_number-converter-NumberConverter.html">NumberConverter</a></li><li><a href="module-montage_core_converter_number-converter-NumberValidator.html">NumberValidator</a></li><li><a href="module-montage_core_converter_number-to-nearest-integer-converter-NumberToNearestIntegerConverter.html">NumberToNearestIntegerConverter</a></li><li><a href="module-montage_core_converter_snake-case-converter-SnakeCaseConverter.html">SnakeCaseConverter</a></li><li><a href="module-montage_core_converter_trim-converter-ExpressionConverter.html">ExpressionConverter</a></li><li><a href="module-montage_core_converter_trim-converter-TrimConverter.html">TrimConverter</a></li><li><a href="module-montage_core_converter_upper-case-converter-UpperCaseConverter.html">UpperCaseConverter</a></li><li><a href="module-montage_core_core-Montage.html">Montage</a></li><li><a href="module-montage_core_enum-Enum.html">Enum</a></li><li><a href="module-montage_core_event_action-event-listener-ActionEventListener.html">ActionEventListener</a></li><li><a href="module-montage_core_event_event-manager-EventManager.html">EventManager</a></li><li><a href="module-montage_core_event_key-manager-KeyManager.html">KeyManager</a></li><li><a href="module-montage_core_event_mutable-event-MutableEvent.html">MutableEvent</a></li><li><a href="module-montage_core_exception-Exception.html">Exception</a></li><li><a href="module-montage_core_gate-Gate.html">Gate</a></li><li><a href="module-montage_core_geometry_cubic-bezier-CubicBezier.html">CubicBezier</a></li><li><a href="module-montage_core_geometry_point-Point.html">Point</a></li><li><a href="module-montage_core_localizer-Localizer.html">Localizer</a></li><li><a href="module-montage_core_localizer-Message.html">Message</a></li><li><a href="module-montage_core_logger-Logger.html">Logger</a></li><li><a href="module-montage_core_meta_validation-rule-PropertyValidationRule.html">PropertyValidationRule</a></li><li><a href="module-montage_core_module-reference-ModuleReference.html">ModuleReference</a></li><li><a href="module-montage_core_object-controller-ObjectController.html">ObjectController</a></li><li><a href="module-montage_core_range-controller-RangeController.html">RangeController</a></li><li><a href="module-montage_core_state-chart-State.html">State</a></li><li><a href="module-montage_core_state-chart-StateChart.html">StateChart</a></li><li><a href="module-montage_core_uuid-Uuid.html">Uuid</a></li><li><a href="module-montage_data_object-property-ObjectProperty.html">ObjectProperty</a></li><li><a href="module-montage_serialization_serialization-Serialization.html">Serialization</a></li><li><a href="module-montage_serialization_serialization-SerializationExtractor.html">SerializationExtractor</a></li><li><a href="module-montage_serialization_serialization-SerializationInspector.html">SerializationInspector</a></li><li><a href="module-montage_serialization_serialization-SerializationMerger.html">SerializationMerger</a></li><li><a href="module-montage_ui_base_abstract-button-AbstractButton.html">AbstractButton</a></li><li><a href="module-montage_ui_base_abstract-control-AbstractControl.html">AbstractControl</a></li><li><a href="module-montage_ui_check-input.CheckControl.html">CheckControl</a></li><li><a href="module-montage_ui_component-Component.html">Component</a></li><li><a href="module-montage_ui_component-RootComponent.html">RootComponent</a></li><li><a href="module-montage_ui_control.Control.html">Control</a></li><li><a href="module-montage_ui_controller_media-controller-MediaController.html">MediaController</a></li><li><a href="module-montage_ui_passage-Passage.html">Passage</a></li><li><a href="module-montage_ui_text.Text.html">Text</a></li><li><a href="module-montage_ui_text-input.TextInput.html">TextInput</a></li><li><a href="ModuleObjectDescriptor.html">ModuleObjectDescriptor</a></li><li><a href="ModuleReference.html">ModuleReference</a></li><li><a href="montage_ui_base_abstract-image.module_reel-AbstractImage.html">AbstractImage</a></li><li><a href="montage_ui_base_abstract-select.module_reel-AbstractSelect.html">AbstractSelect</a></li><li><a href="montage_ui_base_abstract-slider.module_reel-AbstractSlider.html">AbstractSlider</a></li><li><a href="montage_ui_base_abstract-toggle-button.module_reel-AbstractToggleButton.html">AbstractToggleButton</a></li><li><a href="montage_ui_base_abstract-toggle-switch.module_reel-AbstractToggleSwitch.html">AbstractToggleSwitch</a></li><li><a href="montage_ui_base_abstract-video.module_reel-AbstractVideo.html">AbstractVideo</a></li><li><a href="MontageBuilder.html">MontageBuilder</a></li><li><a href="MontageReviver.html">MontageReviver</a></li><li><a href="ObjectDescriptor.html">ObjectDescriptor</a></li><li><a href="PersistentDataService.html">PersistentDataService</a></li><li><a href="PipelineConverter.html">PipelineConverter</a></li><li><a href="PromiseController.html">PromiseController</a></li><li><a href="PropertyDescriptor.html">PropertyDescriptor</a></li><li><a href="PropertyValidationSemantics.html">PropertyValidationSemantics</a></li><li><a href="RadioButtonController.html">RadioButtonController</a></li><li><a href="RangeController.html">RangeController</a></li><li><a href="RawDataService.html">RawDataService</a></li><li><a href="RawPropertyValueToObjectConverter.html">RawPropertyValueToObjectConverter</a></li><li><a href="SnapshotService.html">SnapshotService</a></li><li><a href="Target.html">Target</a></li><li><a href="Template.html">Template</a></li><li><a href="TemplateResources.html">TemplateResources</a></li><li><a href="ui_alert.module_reel-Alert.html">Alert</a></li><li><a href="ui_base_abstract-progress-bar.module_js-AbstractProgressBar.html">AbstractProgressBar</a></li><li><a href="ui_caption.module_reel-Caption.html">Caption</a></li><li><a href="ui_draggable-square.module_reel-DraggableSquare.html">DraggableSquare</a></li><li><a href="ui_list.module_reel-List.html">List</a></li><li><a href="ui_main.module_reel-Main.html">Main</a></li><li><a href="ui_montage-studio-loader.module_reel-MontageStudioLoader.html">MontageStudioLoader</a></li><li><a href="ui_press-composer-layers.module_reel-PressComposerLayers.html">PressComposerLayers</a></li><li><a href="ui_square.module_reel-Square.html">Square</a></li><li><a href="ui_tree-list.module_reel-TreeList.html">TreeList</a></li><li><a href="UserInterfaceDescriptor.html">UserInterfaceDescriptor</a></li><li><a href="-_rotation-composer.module_reel-RotationComposer.html">RotationComposer</a></li></ul><h3>Events</h3><ul><li><a href="AbstractButton.html#event:action">action</a></li><li><a href="AbstractButton.html#event:longAction">longAction</a></li><li><a href="AbstractCheckbox.html#.event:action">action</a></li><li><a href="AbstractCheckbox.html#event:action">action</a></li><li><a href="AbstractControl.html#event:action">action</a></li><li><a href="AbstractLink.html#.event:action">action</a></li><li><a href="AbstractLink.html#event:action">action</a></li><li><a href="AbstractNumberField.html#event:action">action</a></li><li><a href="AbstractRadioButton.html#.event:action">action</a></li><li><a href="AbstractRadioButton.html#event:action">action</a></li><li><a href="AbstractSelect.html#.event:action">action</a></li><li><a href="AbstractTextField.html#.event:action">action</a></li><li><a href="AbstractTextField.html#event:action">action</a></li><li><a href="AbstractToggleButton.html#.event:action">action</a></li><li><a href="AbstractToggleButton.html#.event:longAction">longAction</a></li><li><a href="AbstractToggleSwitch.html#.event:action">action</a></li><li><a href="module-montage_ui_control.html#~event:longpress">longpress</a></li><li><a href="module-_montage_ui_native_button.reel_.Button.html#.event:action">action</a></li><li><a href="module-_montage_ui_native_button.reel_.Button.html#.event:hold">hold</a></li><li><a href="module-_montage_ui_segmented-bar.reel_-SegmentedBar.html#event:action">action</a></li><li><a href="module-_montage_ui_segmented-bar.reel_-SegmentedBar.html#event:longAction">longAction</a></li><li><a href="module-montage_ui_base_abstract-button-AbstractButton.html#event:action">action</a></li><li><a href="montage_ui_base_abstract-select.module_reel-AbstractSelect.html#event:action">action</a></li><li><a href="montage_ui_base_abstract-slider.module_reel-AbstractSlider.html#event:action">action</a></li><li><a href="montage_ui_base_abstract-toggle-button.module_reel-AbstractToggleButton.html#event:action">action</a></li><li><a href="montage_ui_base_abstract-toggle-switch.module_reel-AbstractToggleSwitch.html#event:action">action</a></li><li><a href="Overlay.html#.event:dismiss">dismiss</a></li><li><a href="PressComposer.html#.event:longPress">longPress</a></li><li><a href="PressComposer.html#.event:press">press</a></li><li><a href="PressComposer.html#.event:pressCancel">pressCancel</a></li><li><a href="PressComposer.html#.event:pressStart">pressStart</a></li><li><a href="RotationComposer.html#.event:rotation">rotation</a></li><li><a href="RotationComposer.html#.event:rotationStart">rotationStart</a></li><li><a href="SegmentedBar.html#event:action">action</a></li><li><a href="UndoManager.html#.event:operationRegistered">operationRegistered</a></li><li><a href="UndoManager.html#.event:redo">redo</a></li><li><a href="UndoManager.html#.event:undo">undo</a></li></ul><h3>Namespaces</h3><ul><li><a href="EventManager.html">EventManager</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_isLinkLoadEventAvailable">_isLinkLoadEventAvailable</a></li><li><a href="global.html#_offlinePrimaryKeys">_offlinePrimaryKeys</a></li><li><a href="global.html#_webkitVersion">_webkitVersion</a></li><li><a href="global.html#addPrimaryKeyDependency">addPrimaryKeyDependency</a></li><li><a href="global.html#AuthorizationPolicy">AuthorizationPolicy</a></li><li><a href="global.html#childrenExpression">childrenExpression</a></li><li><a href="global.html#childrenFromNode">childrenFromNode</a></li><li><a href="global.html#collapseAll">collapseAll</a></li><li><a href="global.html#collapseNode">collapseNode</a></li><li><a href="global.html#compiledSyntax">compiledSyntax</a></li><li><a href="global.html#converters">converters</a></li><li><a href="global.html#createDefaultBlueprintForObject">createDefaultBlueprintForObject</a></li><li><a href="global.html#createDefaultObjectDescriptorForObject">createDefaultObjectDescriptorForObject</a></li><li><a href="global.html#data">data</a></li><li><a href="global.html#deserialize">deserialize</a></li><li><a href="global.html#determinate">determinate</a></li><li><a href="global.html#error">error</a></li><li><a href="global.html#expandAll">expandAll</a></li><li><a href="global.html#expandNode">expandNode</a></li><li><a href="global.html#expression">expression</a></li><li><a href="global.html#fooCount">fooCount</a></li><li><a href="global.html#fulfilled">fulfilled</a></li><li><a href="global.html#group">group</a></li><li><a href="global.html#handleTreeChange">handleTreeChange</a></li><li><a href="global.html#identifier">identifier</a></li><li><a href="global.html#initiallyExpanded">initiallyExpanded</a></li><li><a href="global.html#initMontage">initMontage</a></li><li><a href="global.html#initWithExpression">initWithExpression</a></li><li><a href="global.html#initWithObjects">initWithObjects</a></li><li><a href="global.html#initWithPath">initWithPath</a></li><li><a href="global.html#initWithSyntax">initWithSyntax</a></li><li><a href="global.html#isNodeExpanded">isNodeExpanded</a></li><li><a href="global.html#manager">manager</a></li><li><a href="global.html#MontageInterpreter">MontageInterpreter</a></li><li><a href="global.html#ok">ok</a></li><li><a href="global.html#parameters">parameters</a></li><li><a href="global.html#pending">pending</a></li><li><a href="global.html#progress">progress</a></li><li><a href="global.html#progressState">progressState</a></li><li><a href="global.html#promise">promise</a></li><li><a href="global.html#referenceFromValue">referenceFromValue</a></li><li><a href="global.html#rejected">rejected</a></li><li><a href="global.html#state">state</a></li><li><a href="global.html#syntax">syntax</a></li><li><a href="global.html#value">value</a></li><li><a href="global.html#valueFromReference">valueFromReference</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Wed Nov 15 2017 12:53:29 GMT-0800 (PST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
